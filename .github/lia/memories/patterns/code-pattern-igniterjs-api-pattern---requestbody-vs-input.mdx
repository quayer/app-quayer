---
id: code-pattern-igniterjs-api-pattern---requestbody-vs-input
type: code_pattern
confidence: 1
created_at: '2025-09-30T09:43:02.172Z'
updated_at: '2025-09-30T09:43:02.172Z'
tags:
  - igniter
  - api
  - pattern
  - bug-fix
  - critical
source: user_input
project_root: 'c:\Users\Administrator\CascadeProjects\app-quayer'
relationships: []
---
Critical pattern for Igniter.js API development:

## ❌ INCORRECT Pattern (Causes Errors)
```typescript
igniter.mutation({
  input: z.object({ data: z.string() }),
  handler: async ({ input, response }) => {
    const { data } = input  // ❌ ERRO: Cannot read properties of undefined
  }
})
```

## ✅ CORRECT Pattern
```typescript
igniter.mutation({
  method: 'POST',
  body: z.object({ data: z.string() }),
  handler: async ({ request, response }) => {
    const { data } = request.body  // ✅ CORRETO
  }
})
```

## Key Differences
1. Use `body:` not `input:` for POST/PUT/PATCH
2. Use `request.body` not `input` in handler
3. Use `request.params` for route parameters (`:id`)
4. Add explicit `method:` for mutations
5. No need for explicit return types (auto-inferred)

## Example with Route Params
```typescript
igniter.query({
  path: '/status/:token',
  handler: async ({ request, response }) => {
    const { token } = request.params  // ✅ Route params
    // Use token...
  }
})
```

This pattern is consistent across all Igniter.js controllers.
