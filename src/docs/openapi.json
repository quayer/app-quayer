{
  "openapi": "3.0.0",
  "info": {
    "title": "Igniter.js Starter (Next.js)",
    "version": "1.0.0",
    "description": "A sample Next.js App built with Igniter.js"
  },
  "servers": [
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Default server"
    }
  ],
  "tags": [
    {
      "name": "auth",
      "description": "Sistema de autenticação e gerenciamento de usuários"
    },
    {
      "name": "example"
    },
    {
      "name": "instances",
      "description": "Gerenciamento de instâncias WhatsApp com integração UAZapi"
    },
    {
      "name": "share"
    }
  ],
  "paths": {
    "/auth/register": {
      "post": {
        "summary": "Registrar novo usuário com organização padrão",
        "operationId": "Register",
        "tags": [
          "auth"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthRegisterBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "summary": "Fazer login com email e senha",
        "operationId": "Login",
        "tags": [
          "auth"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthLoginBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "summary": "Fazer logout e invalidar sessão",
        "operationId": "Logout",
        "tags": [
          "auth"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/auth/me": {
      "get": {
        "summary": "Obter informações do usuário autenticado",
        "operationId": "GetCurrentUser",
        "tags": [
          "auth"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/auth/users": {
      "get": {
        "summary": "Listar todos os usuários (requer admin)",
        "operationId": "ListUsers",
        "tags": [
          "auth"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/auth/invite": {
      "post": {
        "summary": "Convidar novo usuário por email (requer admin)",
        "operationId": "InviteUser",
        "tags": [
          "auth"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthInviteUserBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/auth/change-password": {
      "post": {
        "summary": "Alterar senha do usuário",
        "operationId": "ChangePassword",
        "tags": [
          "auth"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthChangePasswordBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/auth/invite/:token": {
      "get": {
        "summary": "Validar token de convite",
        "operationId": "ValidateInvite",
        "tags": [
          "auth"
        ],
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/example/hello": {
      "get": {
        "summary": "hello",
        "operationId": "hello",
        "tags": [
          "example"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/instances": {
      "post": {
        "summary": "Criar nova instância WhatsApp",
        "operationId": "CreateInstance",
        "tags": [
          "instances"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InstancesCreateInstanceBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "get": {
        "summary": "Listar instâncias WhatsApp com paginação e filtros",
        "operationId": "ListInstances",
        "tags": [
          "instances"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "exclusiveMinimum": true,
              "minimum": 0,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "exclusiveMinimum": true,
              "minimum": 0,
              "maximum": 100,
              "default": 20
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "connected",
                "disconnected",
                "connecting",
                "all"
              ],
              "default": "all"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/instances/:id": {
      "get": {
        "summary": "Buscar instância por ID",
        "operationId": "GetInstanceById",
        "tags": [
          "instances"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "put": {
        "summary": "Atualizar instância existente",
        "operationId": "UpdateInstance",
        "tags": [
          "instances"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InstancesUpdateInstanceBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Deletar instância e remover do UAZapi",
        "operationId": "DeleteInstance",
        "tags": [
          "instances"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/instances/:id/connect": {
      "post": {
        "summary": "Conectar instância e gerar QR Code",
        "operationId": "ConnectInstance",
        "tags": [
          "instances"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/instances/:id/status": {
      "get": {
        "summary": "Verificar status da instância no UAZapi",
        "operationId": "GetInstanceStatus",
        "tags": [
          "instances"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/instances/:id/disconnect": {
      "post": {
        "summary": "Desconectar instância WhatsApp",
        "operationId": "DisconnectInstance",
        "tags": [
          "instances"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/share/generate": {
      "post": {
        "summary": "generate",
        "operationId": "generate",
        "tags": [
          "share"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShareGenerateBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/share/validate/:token": {
      "get": {
        "summary": "validate",
        "operationId": "validate",
        "tags": [
          "share"
        ],
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/share/qr": {
      "post": {
        "summary": "generateQR",
        "operationId": "generateQR",
        "tags": [
          "share"
        ],
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShareGenerateQRBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/share/status/:token": {
      "get": {
        "summary": "checkStatus",
        "operationId": "checkStatus",
        "tags": [
          "share"
        ],
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AuthRegisterBody": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "minLength": 8
          },
          "name": {
            "type": "string",
            "minLength": 2
          }
        },
        "required": [
          "email",
          "password",
          "name"
        ],
        "additionalProperties": false
      },
      "AuthLoginBody": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "minLength": 1
          }
        },
        "required": [
          "email",
          "password"
        ],
        "additionalProperties": false
      },
      "AuthInviteUserBody": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "user"
            ],
            "default": "user"
          }
        },
        "required": [
          "email"
        ],
        "additionalProperties": false
      },
      "AuthChangePasswordBody": {
        "type": "object",
        "properties": {
          "currentPassword": {
            "type": "string",
            "minLength": 1
          },
          "newPassword": {
            "type": "string",
            "minLength": 8
          }
        },
        "required": [
          "currentPassword",
          "newPassword"
        ],
        "additionalProperties": false
      },
      "InstancesCreateInstanceBody": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9\\s-_]+$"
          },
          "phoneNumber": {
            "type": "string",
            "pattern": "^\\+?[1-9]\\d{1,14}$"
          },
          "brokerType": {
            "type": "string",
            "enum": [
              "uazapi"
            ],
            "default": "uazapi"
          },
          "webhookUrl": {
            "type": "string",
            "format": "uri"
          },
          "uazapiToken": {
            "type": "string"
          },
          "brokerId": {
            "type": "string"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          }
        },
        "required": [
          "name"
        ],
        "additionalProperties": false
      },
      "InstancesListInstancesQuery": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "exclusiveMinimum": true,
            "minimum": 0,
            "default": 1
          },
          "limit": {
            "type": "integer",
            "exclusiveMinimum": true,
            "minimum": 0,
            "maximum": 100,
            "default": 20
          },
          "status": {
            "type": "string",
            "enum": [
              "connected",
              "disconnected",
              "connecting",
              "all"
            ],
            "default": "all"
          },
          "search": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "InstancesUpdateInstanceBody": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9\\s-_]+$"
          },
          "phoneNumber": {
            "type": "string",
            "pattern": "^\\+?[1-9]\\d{1,14}$"
          },
          "brokerType": {
            "type": "string",
            "enum": [
              "uazapi"
            ]
          },
          "webhookUrl": {
            "type": "string",
            "format": "uri"
          },
          "uazapiToken": {
            "type": "string"
          },
          "brokerId": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "ShareGenerateBody": {
        "type": "object",
        "properties": {
          "instanceId": {
            "type": "string",
            "format": "uuid"
          },
          "expiresInHours": {
            "type": "number",
            "exclusiveMinimum": true,
            "minimum": 0,
            "default": 24
          }
        },
        "required": [
          "instanceId"
        ],
        "additionalProperties": false
      },
      "ShareGenerateQRBody": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "format": "uuid"
          }
        },
        "required": [
          "token"
        ],
        "additionalProperties": false
      }
    },
    "securitySchemes": {}
  }
}